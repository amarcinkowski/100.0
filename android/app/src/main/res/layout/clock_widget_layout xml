<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
        android:layout_height="match_parent"
            android:orientation="vertical"
                android:gravity="center"
                    android:padding="16dp"
                        android:background="@drawable/widget_background">

                            <TextView
                                    android:id="@+id/widget_data"
                                            android:layout_width="wrap_content"
                                                    android:layout_height="wrap_content"
                                                            android:text="--"
         # Upewnij się, że jesteś w głównym folderze projektu
         # Tworzenie potrzebnych folderów, jeśli nie istnieją
         mkdir -p android/app/src/main/res/layout
         mkdir -p android/app/src/main/res/drawable
         mkdir -p android/app/src/main/res/xml
         mkdir -p android/app/src/main/kotlin/com/amarcinkowski/clock1000
         
         # --- Plik 1: Layout widżetu ---
         cat > android/app/src/main/res/layout/clock_widget_layout.xml << 'EOF'
         <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="match_parent"
                 android:layout_height="match_parent"
                     android:orientation="vertical"
                         android:gravity="center"
                             android:padding="16dp"
                                 android:background="@drawable/widget_background">
                                 
                                     <TextView
                                             android:id="@+id/widget_data"
                                                     android:layout_width="wrap_content"
                                                             android:layout_height="wrap_content"
                                                                     android:text="--"
                                                                             android:textColor="#FFFFFF"
                                                                                     android:textSize="28sp"
                                                                                             android:textStyle="bold" />
                                                                                             
                                                                                                 <TextView
                                                                                                         android:id="@+id/widget_title"
                                                                                                                 android:layout_width="wrap_content"
                                                                                                                         android:layout_height="wrap_content"
                                                                                                                                 android:text="Ładowanie..."
                                                                                                                                         android:textColor="#DDFFFFFF"
                                                                                                                                                 android:textSize="14sp" />
                                                                                                                                                 </LinearLayout>
                                                                                                                                                 EOF
                                                                                                                                                 
                                                                                                                                                 # --- Plik 2: Tło widżetu ---
                                                                                                                                                 cat > android/app/src/main/res/drawable/widget_background.xml << 'EOF'
                                                                                                                                                 <shape xmlns:android="http://schemas.android.com/apk/res/android"
                                                                                                                                                     android:shape="rectangle">
                                                                                                                                                         <solid android:color="#88000000" />
                                                                                                                                                             <corners android:radius="16dp" />
                                                                                                                                                             </shape>
                                                                                                                                                             EOF
                                                                                                                                                             
                                                                                                                                                             # --- Plik 3: Konfiguracja widżetu ---
                                                                                                                                                             cat > android/app/src/main/res/xml/clock_widget_info.xml << 'EOF'
                                                                                                                                                             <appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
                                                                                                                                                                 android:minWidth="110dp"
                                                                                                                                                                     android:minHeight="40dp"
                                                                                                                                                                         android:targetCellWidth="2"
                                                                                                                                                                             android:targetCellHeight="1"
                                                                                                                                                                                 android:updatePeriodMillis="86400000"
                                                                                                                                                                                     android:previewImage="@mipmap/ic_launcher"
                                                                                                                                                                                         android:initialLayout="@layout/clock_widget_layout"
                                                                                                                                                                                             android:description="@string/widget_description"
                                                                                                                                                                                                 android:resizeMode="horizontal|vertical"
                                                                                                                                                                                                     android:widgetCategory="home_screen">
                                                                                                                                                                                                     </appwidget-provider>
                                                                                                                                                                                                     EOF
                                                                                                                                                                                                     
                                                                                                                                                                                                     # --- Plik 4: Logika natywna widżetu (Kotlin) ---
                                                                                                                                                                                                     cat > android/app/src/main/kotlin/com/amarcinkowski/clock1000/ClockWidgetProvider.kt << 'EOF'
                                                                                                                                                                                                     package com.amarcinkowski.clock1000
                                                                                                                                                                                                     
                                                                                                                                                                                                     import android.appwidget.AppWidgetManager
                                                                                                                                                                                                     import android.content.Context
                                                                                                                                                                                                     import android.content.SharedPreferences
                                                                                                                                                                                                     import android.widget.RemoteViews
                                                                                                                                                                                                     import es.antonborri.home_widget.HomeWidgetLaunchIntent
                                                                                                                                                                                                     import es.antonborri.home_widget.HomeWidgetProvider
                                                                                                                                                                                                     
                                                                                                                                                                                                     class ClockWidgetProvider : HomeWidgetProvider() {
                                                                                                                                                                                                     
                                                                                                                                                                                                         override fun onUpdate(context: Context, appWidgetManager: AppWidgetManager, appWidgetIds: IntArray, widgetData: SharedPreferences) {
                                                                                                                                                                                                                 appWidgetIds.forEach { widgetId ->
                                                                                                                                                                                                                             val views = RemoteViews(context.packageName, R.layout.clock_widget_layout).apply {
                                                                                                                                                                                                                                             val pendingIntent = HomeWidgetLaunchIntent.getActivity(
                                                                                                                                                                                                                                                                 context,
                                                                                                                                                                                                                                                                                     MainActivity::class.java
                                                                                                                                                                                                                                                                                                     )
                                                                                                                                                                                                                                                                                                                     setOnClickPendingIntent(R.id.widget_data, pendingIntent)
                                                                                                                                                                                                                                                                                                                                     setOnClickPendingIntent(R.id.widget_title, pendingIntent)
                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                     val title = widgetData.getString("widget_title", "Clock 1000")
                                                                                                                                                                                                                                                                                                                                                                     val data = widgetData.getString("widget_data", "--")
                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                     setTextViewText(R.id.widget_title, title)
                                                                                                                                                                                                                                                                                                                                                                                                     setTextViewText(R.id.widget_data, data)
                                                                                                                                                                                                                                                                                                                                                                                                                 }
                                                                                                                                                                                                                                                                                                                                                                                                                             appWidgetManager.updateAppWidget(widgetId, views)
                                                                                                                                                                                                                                                                                                                                                                                                                                     }
                                                                                                                                                                                                                                                                                                                                                                                                                                         }
                                                                                                                                                                                                                                                                                                                                                                                                                                         }
                                                                                                                                                                                                                                                                                                                                                                                                                                         EOF
                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                         # --- Plik 5: Modyfikacja strings.xml ---
                                                                                                                                                                                                                                                                                                                                                                                                                                         cat > android/app/src/main/res/values/strings.xml << 'EOF'
                                                                                                                                                                                                                                                                                                                                                                                                                                         <?xml version="1.0" encoding="utf-8"?>
                                                                                                                                                                                                                                                                                                                                                                                                                                         <resources>
                                                                                                                                                                                                                                                                                                                                                                                                                                             <string name="app_name">clock1000</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                 <string name="widget_description">Pokazuje minuty od 6:15</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                 </resources>
                                                                                                                                                                                                                                                                                                                                                                                                                                                 EOF
                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                 # --- Plik 6: Modyfikacja AndroidManifest.xml ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                 cat > android/app/src/main/AndroidManifest.xml << 'EOF'
                                                                                                                                                                                                                                                                                                                                                                                                                                                 <manifest xmlns:android="http://schemas.android.com/apk/res/android">
                                                                                                                                                                                                                                                                                                                                                                                                                                                     <application
                                                                                                                                                                                                                                                                                                                                                                                                                                                             android:label="clock1000"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                     android:name="${applicationName}"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                             android:icon="@mipmap/ic_launcher">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     <activity
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 android:name=".MainActivity"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             android:exported="true"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         android:launchMode="singleTop"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     android:theme="@style/LaunchTheme"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 android:configChanges="orientation|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             android:hardwareAccelerated="true"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         android:windowSoftInputMode="adjustResize">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     <meta-data
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   android:name="io.flutter.embedding.android.NormalTheme"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 android:resource="@style/NormalTheme"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <intent-filter>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <action android:name="android.intent.action.MAIN"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <category android:name="android.intent.category.LAUNCHER"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </intent-filter>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </activity>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <receiver android:name=".ClockWidgetProvider"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 android:exported="true"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   android:label="Clock 1000">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <intent-filter>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </intent-filter>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <meta-data android:name="android.appwidget.provider"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              android:resource="@xml/clock_widget_info" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </receiver>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <meta-data
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          android:name="flutterEmbedding"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      android:value="2" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </application>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <uses-permission android:name="android.permission.INTERNET"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </manifest>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              EOF
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              echo "✅ Wszystkie pliki Android zostały utworzone i zaktualizowane!"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         android:textColor="#FFFFFF"
                                                                            android:textSize="28sp"
                                                                                    android:textStyle="bold" />

                                                                                        <TextView
                                                                                                android:id="@+id/widget_title"
                                                                                                        android:layout_width="wrap_content"
                                                                                                                android:layout_height="wrap_content"
                                                                                                                        android:text="Ładowanie..."
                                                                                                                                android:textColor="#DDFFFFFF"
                                                                                                                                        android:textSize="14sp" />
                                                                                                                                        </LinearLayout>
                                                                                                                                